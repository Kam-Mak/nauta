

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Working with Datasets &mdash; Nauta 1.1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/white_logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../README.html">Product Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../README.html#nauta-user-guide-purpose">Nauta User Guide Purpose</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation-and-configuration/README.html">Nauta Installation, Configuration, and Administration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation-and-configuration/README.html#nauta-hardware-requirement-overview">Nauta Hardware Requirement Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation-and-configuration/README.html#nauta-installation-procedures">Nauta Installation Procedures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation-and-configuration/README.html#document-flow">Document Flow</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Nauta</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Working with Datasets</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/user-guide/actions/working_with_datasets.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="working-with-datasets">
<h1>Working with Datasets<a class="headerlink" href="#working-with-datasets" title="Permalink to this headline">¶</a></h1>
<p>The section discusses the following main topics:</p>
<ul class="simple">
<li><p><a class="reference external" href="#uploading-datasets">Uploading Dataset</a></p></li>
<li><p><a class="reference external" href="#nctl-mount-command">nctl mount Command</a></p></li>
<li><p><a class="reference external" href="#mounting-and-accessing-folders">Mounting and Accessing Folders</a></p></li>
<li><p><a class="reference external" href="#uploading-and-using-dataset-example">Uploading and Using Dataset Example</a></p></li>
<li><p><a class="reference external" href="#uploading-and-using-a-shared-dataset">Uploading and Using Shared Dataset</a></p></li>
<li><p><a class="reference external" href="#uploading-during-experiment-submission">Uploading During Experiment Submission</a></p></li>
</ul>
<div class="section" id="uploading-datasets">
<h2>Uploading Datasets<a class="headerlink" href="#uploading-datasets" title="Permalink to this headline">¶</a></h2>
<p>Nauta uses NFS to connect to a storage location where each user has folders that have been setup to store experiment input and output data. This option allows the user to upload files and datasets for private use and for sharing. Once uploaded, the files are referenced by the  path.</p>
<p>All data in the folders are retained until the user manually removes it from the NFS storage. Refer to the <a class="reference external" href="#uploading-and-using-dataset-example">Uploading and Using Dataset Example</a> in this section for information.</p>
</div>
<div class="section" id="nctl-mount-command">
<h2>nctl mount Command<a class="headerlink" href="#nctl-mount-command" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">mount</span></code> command displays another command that can be used to mount Nauta folders to a user’s local
machine. When a user executes the command, information similar to the following is displayed (the example shown is for macOS only).</p>
<p>Use the following command to mount those folders (scroll right to see full contents):</p>
<p><code class="docutils literal notranslate"><span class="pre">nctl</span> <span class="pre">mount</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|=======================================================================================================|</span>
<span class="o">|</span>   <span class="o">&lt;</span><span class="n">NAUTA_FOLDER</span><span class="o">&gt;</span>  <span class="o">|</span>   <span class="n">Code</span> <span class="n">Reference</span> <span class="n">Path</span>     <span class="o">|</span>   <span class="n">User</span> <span class="n">Access</span>     <span class="o">|</span>   <span class="n">Shared</span> <span class="n">Access</span>                   <span class="o">|</span>
<span class="o">|-------------------------------------------------------------------------------------------------------|</span>
<span class="o">|</span>   <span class="nb">input</span>           <span class="o">|</span>   <span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="nb">input</span><span class="o">/</span><span class="n">home</span>         <span class="o">|</span>   <span class="n">read</span><span class="o">/</span><span class="n">write</span>      <span class="o">|</span>   <span class="o">-</span>                               <span class="o">|</span>
<span class="o">|</span>   <span class="n">output</span>          <span class="o">|</span>   <span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">output</span><span class="o">/</span><span class="n">home</span>        <span class="o">|</span>   <span class="n">read</span><span class="o">/</span><span class="n">write</span>      <span class="o">|</span>   <span class="o">-</span>                               <span class="o">|</span>
<span class="o">|</span>   <span class="nb">input</span><span class="o">-</span><span class="n">shared</span>    <span class="o">|</span>   <span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="nb">input</span><span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">public</span>  <span class="o">|</span>   <span class="n">read</span><span class="o">/</span><span class="n">write</span>      <span class="o">|</span>   <span class="n">read</span><span class="o">/</span><span class="n">write</span>                      <span class="o">|</span>
<span class="o">|</span>   <span class="n">output</span><span class="o">-</span><span class="n">shared</span>   <span class="o">|</span>   <span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">output</span><span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">public</span> <span class="o">|</span>   <span class="n">read</span><span class="o">/</span><span class="n">write</span>      <span class="o">|</span>   <span class="n">read</span><span class="o">/</span><span class="n">write</span>                      <span class="o">|</span>
<span class="o">|</span>   <span class="nb">input</span><span class="o">-</span><span class="n">output</span><span class="o">-</span><span class="n">ro</span> <span class="o">|</span>                           <span class="o">|</span>   <span class="n">read</span>            <span class="o">|</span>   <span class="n">read</span>                            <span class="o">|</span>
<span class="o">|=======================================================================================================|</span>
<span class="o">|</span>   <span class="n">Each</span> <span class="n">experiment</span> <span class="n">has</span> <span class="n">a</span> <span class="n">special</span> <span class="n">folder</span> <span class="n">that</span> <span class="n">can</span> <span class="n">be</span> <span class="n">accessed</span>                                           <span class="o">|</span>
<span class="o">|</span>   <span class="k">as</span> <span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">output</span><span class="o">/</span><span class="n">experiment</span> <span class="kn">from</span> <span class="nn">training</span> <span class="n">script</span><span class="o">.</span> <span class="n">This</span> <span class="n">folder</span> <span class="ow">is</span> <span class="n">shared</span> <span class="n">by</span> <span class="n">Samba</span>                      <span class="o">|</span>
<span class="o">|</span>   <span class="k">as</span> <span class="n">output</span><span class="o">/&lt;</span><span class="n">EXPERIMENT_NAME</span><span class="o">&gt;.</span>                                                                        <span class="o">|</span>
<span class="o">|=======================================================================================================|</span>
<span class="o">|</span>   <span class="o">&lt;</span><span class="n">MOUNTPOINT</span><span class="o">&gt;</span>    <span class="o">|</span>   <span class="n">folder</span><span class="o">/</span><span class="n">drive</span> <span class="n">location</span> <span class="n">on</span> <span class="n">your</span> <span class="n">local</span> <span class="n">machine</span>                                     <span class="o">|</span>
<span class="o">|=======================================================================================================|</span>
    
<span class="n">Command</span> <span class="n">to</span> <span class="n">unmount</span> <span class="n">previously</span> <span class="n">mounted</span> <span class="n">folder</span><span class="p">:</span>
<span class="n">sudo</span> <span class="n">umount</span> <span class="o">&lt;</span><span class="n">MOUNTPOINT</span><span class="o">&gt;</span> <span class="p">[</span><span class="o">-</span><span class="n">fl</span><span class="p">]</span>
<span class="n">In</span> <span class="n">case</span> <span class="n">of</span> <span class="n">problems</span> <span class="k">with</span> <span class="n">unmounting</span> <span class="p">(</span><span class="n">disconnected</span> <span class="n">disk</span> <span class="n">etc</span><span class="o">.</span><span class="p">)</span> <span class="k">try</span> <span class="n">out</span> <span class="o">-</span><span class="n">f</span> <span class="p">(</span><span class="n">force</span><span class="p">)</span> <span class="ow">or</span> <span class="o">-</span><span class="n">l</span> <span class="p">(</span><span class="n">lazy</span><span class="p">)</span> <span class="n">options</span><span class="o">.</span> <span class="n">For</span> <span class="n">more</span> <span class="n">info</span> <span class="n">about</span> <span class="n">these</span> <span class="n">options</span> <span class="n">refer</span> <span class="n">to</span> <span class="n">man</span> <span class="n">umount</span><span class="o">.</span>

<span class="n">Example</span> <span class="n">usage</span><span class="p">:</span>
    <span class="o">-</span> <span class="n">Mounting</span> <span class="n">a</span> <span class="n">local</span> <span class="n">folder</span> <span class="p">(</span><span class="n">mylocalfolder</span><span class="p">)</span> <span class="n">to</span> <span class="n">the</span> <span class="n">user</span><span class="s1">&#39;s Nauta input folder:</span>
        <span class="n">sudo</span> <span class="n">mount</span><span class="o">.</span><span class="n">cifs</span> <span class="o">-</span><span class="n">o</span> <span class="n">username</span><span class="o">=</span><span class="n">JANEDOE</span><span class="p">,</span><span class="n">password</span><span class="o">=</span><span class="n">lqS9P5kQ0TFzMmscCY21ZklDDKZtdBeH</span><span class="p">,</span><span class="n">rw</span><span class="p">,</span><span class="n">uid</span><span class="o">=</span><span class="mi">10001</span> <span class="o">//</span><span class="mf">10.91</span><span class="o">.</span><span class="mf">120.152</span><span class="o">/</span><span class="nb">input</span> <span class="n">mylocalfolder</span>
    <span class="o">-</span> <span class="n">Code</span> <span class="n">reference</span> <span class="n">path</span><span class="p">:</span>
        <span class="n">data_dir</span><span class="o">=/</span><span class="n">mnt</span><span class="o">/</span><span class="nb">input</span><span class="o">/</span><span class="n">home</span><span class="o">/&lt;</span><span class="n">Uploaded</span><span class="o">-</span><span class="n">DataFolder</span><span class="o">&gt;</span>
    <span class="o">-</span> <span class="n">Unmount</span> <span class="n">the</span> <span class="n">folder</span><span class="p">:</span>
        <span class="n">umount</span> <span class="n">mylocalfolder</span>
</pre></div>
</div>
<div class="section" id="other-nctl-mount-and-mount-information">
<h3>Other nctl mount and mount Information<a class="headerlink" href="#other-nctl-mount-and-mount-information" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">nctl</span> <span class="pre">mount</span></code> command also returns a command to unmount a folder. Nauta uses the mount command that is native to each operating system, so the command printed out <em>may not</em> appear as in this example. In addition, <em>all variables</em> are shown in upper-case.</p>
</div>
</div>
<div class="section" id="mounting-and-accessing-folders">
<h2>Mounting and Accessing Folders<a class="headerlink" href="#mounting-and-accessing-folders" title="Permalink to this headline">¶</a></h2>
<p>The following table shows the access permissions for each mounting folder.</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="left">Nauta Folder</th>
<th align="left">Reference Path</th>
<th align="left">User Access</th>
<th align="left">Shared Access</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">input</td>
<td align="left">/mnt/input/home</td>
<td align="left">read/write</td>
<td align="left">-</td>
</tr>
<tr>
<td align="left">output</td>
<td align="left">/mnt/output/home</td>
<td align="left">read/write</td>
<td align="left">-</td>
</tr>
<tr>
<td align="left">input-shared</td>
<td align="left">/mnt/input/root/public</td>
<td align="left">read/write</td>
<td align="left">read/write</td>
</tr>
<tr>
<td align="left">output-shared</td>
<td align="left">/mnt/output/root/public</td>
<td align="left">read/write</td>
<td align="left">read/write</td>
</tr>
<tr>
<td align="left">input-output-ro</td>
<td align="left"></td>
<td align="left">read</td>
<td align="left">read</td>
</tr>
</tbody>
</table></div>
<div class="section" id="uploading-and-using-dataset-example">
<h2>Uploading and Using Dataset Example<a class="headerlink" href="#uploading-and-using-dataset-example" title="Permalink to this headline">¶</a></h2>
<p>The default configuration is to mount local folders to a Nauta user’s private input and output storage folders. Execute the the following steps to mount a local folder,<code class="docutils literal notranslate"><span class="pre">my-input</span></code>, to Nauta storage so that input data can be referenced from the storage when performing training.</p>
<ol>
<li><p><strong>Linux/macOS only:</strong> Create a folder for mounting named <code class="docutils literal notranslate"><span class="pre">my-input</span></code>folder.</p>
<p><code class="docutils literal notranslate"><span class="pre">mkdir</span> <span class="pre">my-input</span></code></p>
</li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">nctl</span> <span class="pre">mount</span></code> to display the mounting command for your operating system.</p>
<p><code class="docutils literal notranslate"><span class="pre">nctl</span> <span class="pre">mount</span></code></p>
</li>
<li><p>Enter the <code class="docutils literal notranslate"><span class="pre">mount</span></code> command that is provided by <code class="docutils literal notranslate"><span class="pre">nctl</span> <span class="pre">mount</span></code>using the input as the NAUTA-FOLDER and my-input folder as the MOUNTPOINT. Examples of mounting the command:</p>
<ul class="simple">
<li><p><strong>MacOS:</strong> <code class="docutils literal notranslate"><span class="pre">mount_mbfs</span> <span class="pre">//'USERNAME:PASSWORD'&#64;CLUSTER-URL/input</span></code></p></li>
<li><p><strong>Ubuntu:</strong> <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">mount.cifs</span> <span class="pre">-o</span> <span class="pre">username=USERNAME,password=PASSWORD,rw,uid=1000</span> <span class="pre">//CLUSTER-URL/input</span></code></p></li>
</ul>
</li>
<li><p>Navigate to the mounted location:</p>
<ul class="simple">
<li><p><strong>MacOS/Ubuntu only:</strong> Navigate to my-input folder.</p></li>
</ul>
</li>
<li><p>Copy a dataset or files to the folder for use in experiments. The files will be located in the Nauta storage until deleted.</p></li>
<li><p>Use the MNIST example from <a class="reference external" href="getting_started.md#submitting-an-experiment">Submitting an Experiment</a>, you can download the MNIST dataset using the following link: <a class="reference external" href="http://yann.lecun.com/exdb/mnist">THE MNIST DATABASE</a></p></li>
<li><p>Create a MNIST folder in the Nauta input folder.</p></li>
<li><p>Copy the downloaded files to the folder.</p></li>
<li><p>Submit an experiment referencing the new shared dataset. From the nctl home directory, run this command (scroll right to see the full contents):</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nctl</span> <span class="n">experiment</span> <span class="n">submit</span> <span class="o">--</span><span class="n">name</span> <span class="n">mnist</span><span class="o">-</span><span class="nb">input</span> <span class="n">examples</span><span class="o">/</span><span class="n">mnist_single_node</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span> <span class="o">--</span><span class="n">data_dir</span><span class="o">=/</span><span class="n">mnt</span><span class="o">/</span><span class="nb">input</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">MNIST</span>
</pre></div>
</div>
</div>
<div class="section" id="uploading-and-using-a-shared-dataset">
<h2>Uploading and Using a Shared Dataset<a class="headerlink" href="#uploading-and-using-a-shared-dataset" title="Permalink to this headline">¶</a></h2>
<p>If you want to copy your data to a shared folder, use input-shared instead of input in step 3. Using the shared Nauta storage will allow all Nauta users to use the same MNIST dataset by referencing the shared path:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="nb">input</span><span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">public</span><span class="o">/</span><span class="n">MNIST</span>
</pre></div>
</div>
</div>
<div class="section" id="uploading-during-experiment-submission">
<h2>Uploading During Experiment Submission<a class="headerlink" href="#uploading-during-experiment-submission" title="Permalink to this headline">¶</a></h2>
<p>Uploading additional files is an option available for the <code class="docutils literal notranslate"><span class="pre">submit</span></code> command, using the following option:</p>
<p><code class="docutils literal notranslate"><span class="pre">-sfl,</span> <span class="pre">--script-folder-location</span></code></p>
<p>Where <code class="docutils literal notranslate"><span class="pre">script-folder-location</span></code> is the name of a folder with additional files used by a script. For example, other <code class="docutils literal notranslate"><span class="pre">.py</span></code> files, assets, and so on.</p>
<p><strong>Syntax:</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">nctl</span> <span class="pre">experiment</span> <span class="pre">submit</span> <span class="pre">--script-folder-location</span> <span class="pre">DATASET-PATH</span> <span class="pre">SCRIPT-LOCATION</span></code></p>
<p>This option may be used only for small datasets for development purposes (datasets larger than several MB should be uploaded
using standard mechanism described above).</p>
<p><strong>WARNING:</strong> Submitting large amount of data using this option will prolong an experiments’ submission time.</p>
</div>
<hr class="docutils" />
<div class="section" id="return-to-start-of-document">
<h2>Return to Start of Document<a class="headerlink" href="#return-to-start-of-document" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="../README.html"><span class="doc">README</span></a></p></li>
</ul>
<hr class="docutils" />
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Intel Corporation

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>